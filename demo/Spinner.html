<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script src="assets/loader/esl.js"></script>
<!--[if lt IE 9]>
<script src="http://xy3.baidu.com/js/html5.js"></script>
<![endif]-->
<script src="assets/third-party/prism.js"></script>
<script src="assets/third-party/jquery-1.9.1.min.js"></script>
<script src="assets/demo.js"></script>
<link rel="stylesheet" href="assets/themes/standard.css" />
<style>
    h1 {
        font-family: 'Microsoft Yahei', Arial, sans-serif;
        margin: 10px 0;
        font-size: 24px;
        font-weight: 400;
    }

    h2 {
        font-family: 'Microsoft Yahei', Arial, sans-serif;
        margin: 10px 0;
        font-size: 22px;
        font-weight: 400;
    }

    .blackboard {
        background-color: #000000;
        color: #ffffff;
        font-family: "Consolas", "Menlo", "Courier", monospace;
        font-size: 16px;
        padding: 10px;
        margin: 10px 0;
        min-height: 50px;
        overflow-x: scroll;
        overflow-y: auto;
    }
    ul li {
        margin: 10px 0;
        list-style: none;
    }
    ul label {
        width: 150px;
        display: inline-block;
    }
    .custom {
        text-align: center;
    }
    .btn {
        color: #333333;
        width: 100px;
    }
</style>
<script>
    require.config({
        'baseUrl': '../src',
        'paths': {},
        'packages': [
            {
                'name': 'mini-event',
                'location': '../dep/mini-event/1.0.2/src',
                'main': 'main'
            },
            {
                'name': 'underscore',
                'location': '../dep/underscore/1.6.0/src',
                'main': 'underscore'
            },
            {
                'name': 'moment',
                'location': '../dep/moment/2.7.0/src',
                'main': 'moment'
            },
            {
                'name': 'etpl',
                'location': '../dep/etpl/3.0.0/src',
                'main': 'main'
            },
            {
                'name': 'esui',
                'location': '../dep/esui/3.1.0-beta.6/src',
                'main': 'main'
            },
            {
                'name': 'ub-ria-ui',
                'location': '../src',
                'main': 'main'
            },
            {
                'name': 'ef',
                'location': '../dep/ef/3.1.0-beta.3/src',
                'main': 'main'
            },
            {
                'name': 'eoo',
                'location': '../dep/eoo/0.1.1/src',
                'main': 'main'
            },
            {
                'name': 'est',
                'location': '../dep/est/1.3.0/src'
            },
            {
                'name': 'esf',
                'location': '../dep/esf/1.0.0-alpha.8/src'
            },
            {
                'name': 'eicons',
                'location': '../dep/eicons/1.0.0-alpha.3/src',
                'main': 'main.less'
            },
            {
                'name': 'er',
                'location': '../dep/er/3.1.0-beta.6/src',
                'main': 'main'
            }
        ]
    });
</script>
<div style="margin: 20px 20% 10%;">
    <h1>微调输入</h1>
    <h2>模板中创建示例---------------------------------------------------------</h2>
    <div data-ui-type="TextBox" data-ui-id="myTextBox" data-ui-placeholder="hehe" data-ui-hint="$"
         data-ui-width="500"
         data-ui-hint-type="prefix" data-ui-extension-spinner-type="Spinner"
         data-ui-extension-spinner-format="YYYY-MM-DD"
         data-ui-extension-spinner-time-interval="100" data-ui-extension-spinner-turn="false"
         data-ui-extension-spinner-upper-bound="20150630"
         data-ui-extension-spinner-lower-bound="20150101"></div>
    <div class="blackboard">
        <pre>
&lt;div data-ui-type="TextBox" data-ui-id="myTextBox" data-ui-placeholder="hehe" data-ui-hint="$"
    data-ui-width="500"
    data-ui-hint-type="prefix" data-ui-extension-spinner-type="Spinner"
    data-ui-extension-spinner-format="YYYY-MM-DD"
    data-ui-extension-spinner-time-interval="100" data-ui-extension-spinner-turn="false"
    data-ui-extension-spinner-upper-bound="20150630"
    data-ui-extension-spinner-lower-bound="20150101"&gt;
&lt;/div&gt;
        </pre>
    </div>
    <div class="dashboard">
    </div>
    <h2>自定义配置示例---------------------------------------------------------</h2>
    <ul>
        <li>
            <label>turn:<input id="turn" type="checkbox" name="turn"></label>
            <label>readOnly:<input id="readOnly" type="checkbox" name="readOnly"></label>
            <label>disabled:<input id="disabled" type="checkbox" name="disabled"></label>
        </li>
        <li>
            <label>hintType:</label>
            <input id="prefix" type="radio" name="hintType" value="prefix"><label for="prefix">prefix</label>
            <input id="suffix" type="radio" name="hintType" value="suffix"><label for="suffix">suffix</label>
        </li>
        <li>
            <label>useCustom:<input id="useCustom" type="checkbox" name="useCustom"></label>
        </li>
        <li>
            <label for="scale">scale:</label><input type="text" id="scale" name="scale">
        </li>
        <li>
            <label for="upperBound">upperBound:</label><input type="text" id="upperBound" name="upperBound">
        </li>
        <li>
            <label for="lowerBound">lowerBound:</label><input type="text" id="lowerBound" name="lowerBound">
        </li>
        <li>
            <label for="format">format:</label><input type="text" id="format" name="format">
        </li>
        <li>
            <label for="timeInterval">timeInterval:</label><input type="text" id="timeInterval" name="timeInterval">
        </li>
        <li>
            <label for="spinnerValue">spinnerValue:</label><input type="text" name="spinnerValue" id="spinnerValue">
        </li>
        <li>
            <input type="button" id="tryBtn" value="确定" class="ui-button btn">
        </li>
    </ul>
    <div id="custom" class="custom">
        <div data-ui-type="TextBox" data-ui-id="custom" data-ui-placeholder="hehe" data-ui-hint="$"
             data-ui-width="500"
             data-ui-hint-type="prefix">
        </div>
    </div>
</div>

<script>
    require(['esui', 'Spinner', 'esui/TextBox'], function (ui) {
        var lib = require('esui/lib');
        var u = require('underscore');
        ui.init();

        var myTextBox = ui.get('myTextBox');
        var custom = ui.get('custom');

        myTextBox.scale = {key: "day", value: 1};

        function refreshView () {
            var options = {};
            var opt = {};
            var inputOptions = {};
            var disabled = lib.g('disabled').checked;
            var readOnly = lib.g('readOnly').checked;
            var hint = document.getElementsByName('hintType');
            var hintType;
            var useCustom = lib.g('useCustom').checked;

            for(var i = 0; i< hint.length; i++) {
                if(hint[i].checked) {
                    hintType = hint[i].value;
                }
            }

            options.turn = lib.g('turn').checked;
            options.scale = lib.g('scale').value;
            options.upperBound = lib.g('upperBound').value;
            options.lowerBound = lib.g('lowerBound').value;
            options.format = lib.g('format').value;
            options.timeInterval = lib.g('timeInterval').value;
//            options.mask = lib.g('mask');
            inputOptions.disabled = disabled;
            inputOptions.readOnly = readOnly;
            inputOptions.hintType = hintType;

            custom.setProperties(inputOptions);
            u.each(options, function (value, key) {
                if (!!value) {
                    opt[key] = value;
                }
            });
            var ext = u.findWhere(custom.extensions, {type: "Spinner"});
            if (ext) {
                ext.dispose();
            }

            var spinner = ui.createExtension(
                    'Spinner',
                    opt
            );
            spinner.attachTo(custom);
            custom.extensions.push(spinner);
            custom.mask = {
                '(╯‵□′)╯︵┻━┻': 1,
                '(╯‵□′)╯︵ ┻━┻': 2,
                '(╯‵□′)╯︵  ┻━┻': 3,
                "┬─┬  ノ( ' - 'ノ) ": 4,
                '(╯‵□′)╯︵   ┻━┻': 5,
                "┬─┬ ノ( ' - 'ノ) ": 6,
                "（╯' - ')╯︵ ┻━┻ ": 7,
                '(╯‵□′)╯︵     ┻━┻': 8,
                ' - ( ゜- ゜)つロ 乾杯~': [0, 10, 13]
            };
            if (useCustom) {
                custom.on('scrollValue', showSpinnerValue);
            } else {
                custom.un('scrollValue', showSpinnerValue);
            }
        }
        var spinnerValue = lib.g('spinnerValue');
        function showSpinnerValue (e) {
            setTimeout(function () {
                spinnerValue.value = e.target.spinnerValue;
            },0);
        }

        var tryBtn = lib.g('tryBtn');
        tryBtn.onclick = refreshView;
    });
</script>
</body>
</html>