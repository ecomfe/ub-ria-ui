<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>CascadingTreeRichSelector - Demo</title>
    <link rel="stylesheet" href="assets/themes/standard.css" />
    <link href="assets/third-party/prism.css" rel="stylesheet" />
    <script src="assets/loader/esl.js"></script>

    <!--[if lt IE 9]>
    <script src="http://xy3.baidu.com/js/html5.js"></script>
    <![endif]-->
    <script src="assets/third-party/prism.js"></script>
    <script src="assets/third-party/jquery-1.9.1.min.js"></script>

    <script src="demo.js"></script>

    <style>
        .ui-richselector {
            display: inline-block;
            margin: 5px;
        }

        .view {
            background-color: #fff;
            border: 1px solid #eee;
        }

        h3 {
            padding: 20px 10px 10px 0;
        }
    </style>
</head>
<body>
    <h1>CascadingTreeRichSelector</h1>
    <div id="page">
        <ul id="navigator">
        </ul>
        <div id="main">
            <h2>双排树选择控件</h2>
            <section class="view">
                <ul class="viewer">
                    <li class="view-markup">结构</li>
                </ul>

                <div class="form-field">
                    <h3>左右多选</h3>
                    <div
                        data-ui-type="CascadingTreeRichSelector"
                        data-ui-id="cas-slots"
                        data-ui-name="casSlots"
                        data-ui-item-name="代码位"
                        data-ui-source-title="请选代码位"
                        data-ui-target-title="已选代码位"
                        data-ui-source-empty-text="没有符合条件的代码位"
                        data-ui-target-empty-text="请从左侧选择要添加的代码位"
                        data-ui-has-source-search-box="true"
                        data-ui-has-target-search-box="false"
                        data-ui-has-height="300"
                        data-ui-has-width="200"
                        data-ui-has-search-box="false">
                    </div>
                    <button data-ui="type:Button;id:getBtn;">获取选中值</button>
                </div>
            </section>
        </div>
    </div>
    <script>
        require(
            [
                'esui',
                'CascadingTreeRichSelector',
                'esui/Button'
            ],
            function (ui) {
                var tables = ui.init(document.body);
                var table1 = ui.get('cas-slots');

                var treeDatasource = {
                    id: '0',
                    text: '所有广告位',
                    children: []
                };
                var children = treeDatasource.children;
                for (var i = 0; i < 2; i++) {
                    children.push({
                        text: '广告位' + (i + 1),
                        name: '广告位' + (i + 1),
                        id: i + 1
                    })
                }

                for (i = 0; i < children.length; i++) {
                    var node = children[i];
                    node.children = [
                        {
                            text: '子节点' + i,
                            name: '子节点' + (i),
                            id: 100 + i
                            //,
                            //isSelected: Math.random() > 0.5 ? true : false
                        }
                    ]
                }
                table1.setProperties({
                    datasource: treeDatasource, 
                    rawValue: [101]
                });
                
                var getBtn = ui.get('getBtn');
                getBtn.onclick = function () {
                    console.log(table1.getRawValue());
                };
            }
        );
    </script>
</body>
</html>
