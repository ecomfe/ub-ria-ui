<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>Carousel - Demo</title>
    <link rel="stylesheet" href="assets/themes/standard.css" />
    <link href="assets/third-party/prism.css" rel="stylesheet" />
    <script src="assets/loader/esl.js"></script>

    <!--[if lt IE 9]>
    <script src="http://xy3.baidu.com/js/html5.js"></script>
    <![endif]-->
    <script src="assets/third-party/prism.js"></script>
    <script src="assets/third-party/jquery-1.9.1.min.js"></script>

    <script src="assets/demo.js"></script>
</head>
<body>
    <h1>Carousel</h1>
    <div id="page">
        <ul id="navigator">
        </ul>
        <div id="main">
            <h2>抽屉</h2>
            <section class="intro">
                <p>一个抽屉</p>
            </section>
            <section class="view">
                <ul class="viewer">
                    <li class="view-markup">结构</li>
                </ul>
                <div class="example" id="container">
                    <div style="float: left;"
                     class="no-move-richselector"
                     data-ui="type:TreeRichSelector;id:table3;itemName:广告位;hasFoot:false;hasIcon:false;hasHead:false;"></div>
                </div>
            </section>
        </div>
    </div>
    <script>
        require(
                [
                    'esui',
                    'TreeRichSelector'
                ],
                function (ui) {
                    // {name:xxx, id:xxx, isSelected: true}
                    var tables = ui.init(document.body);
                    var table1 = tables[0];
                    var table2 = tables[1];

                    var datasource = {
                        id: 'root',
                        text: '所有广告位',
                        children: []
                    };
                    var children = datasource.children;
                    for (var i = 0; i < 20; i++) {
                        var isSelected = false;
                        if (i == 20) {
                            isSelected = true;
                        }
                        children.push({
                            text: '广告位' + (i + 1),
                            id: i + 1,
                            isSelected: isSelected
                        })
                    }

                    for (i = 0; i < children.length; i += 2) {
                        var node = children[i];
                        node.children = [
                            {
                                text: '子节点' + i,
                                id: 'child' + i
                            }
                        ]
                    }

                    table1.setProperties({datasource: datasource});
                    table1.on('change', function () {
                        var newdata = this.getSelectedItems();
                        table2.setProperties({
                            datasource: {
                                id: 'root',
                                text: '根节点',
                                children: newdata
                            }
                        })
                    });

                    table2.on('change', function (arg) {
                        var items = arg.items;
                        table1.unSelectItems(items);
                    });


                    var table3 = tables[2];
                    table3.setProperties({datasource: datasource});
                }
        );
    </script>
</body>
</html>
